<!DOCTYPE html>

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Flow builder</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="script.js" defer></script>
  </head>
  <body>
    <div class="container">
      <section class="tools-board">
        <div class="row">
          <label class="title">Toolbar</label>
          <ul class="options">
            <li class="option tool" id="rectangle" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/rectangular.png" alt="">
            </li>

            <li class="option tool" id="curved rectangle" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/roundedrectangle.png" alt="">
            </li>

            <li class="option tool" id="oval" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/oval.png" alt="">
            </li>

            <li class="option tool" id="square"draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/square.png" alt="">
            </li>

            <li class="option tool" id="circle"draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/circle.png" alt="">
            </li>

            <li class="option tool" id="diamond"draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/diamond.png" alt="">
            </li>

            <li class="option tool" id="hexogan"draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/hexogan.png" alt="">
            </li>

            <li class="option tool" id="pentagon"draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/pentagon.png" alt="">
            </li>

            <li class="option tool" id="triangle" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/triangle.png" alt="">
            </li>

            <li class="option tool" id="cylinder" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/cylinder.png" alt="">
            </li>

            <li class="option tool" id="dottedline" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/dottedline.png" alt="">
            </li>

            <li class="option tool" id="bolddottedline" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/bolddottedline.png" alt="">
            </li>

            <li class="option tool" id="uparrow" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/uparrow.png" alt="">
            </li>

            <li class="option tool" id="downarrow" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/downarrow.png" alt="">
            </li>

            <li class="option tool" id="leftarrow" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/leftarrow.png" alt="">
            </li>

            <li class="option tool" id="rightarrow" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/rightarrow.png" alt="">
            </li>

            <li class="option tool" id="diagonalarrow" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)">
              <img src="icons/diagonalarrow.png" alt="">
            </li>
          </ul>
        </div>
        <div class="row1">
          <label class="title">Options</label>
          <ul class="options">
            <li class="option active tool" id="write">
              <img src="icons/brush.svg" alt="">
              <span>Write</span>
            </li>
          </ul> 
        <div class="rowbuttons">
          <button class="clear-canvas">Clear Diagram</button>
          <button class="save-img">Save As Image</button>
        </div>
      </section>
      <section class="drawing-board">
        <canvas></canvas>
        <script>
          var width =window.innerWidth;
          var height=window.innerHeight;

          var stage=new canva.Stage({
            cotainer:'canvas',
            width:width,
            height:height,
          });

          var layer =new canva.Layer();
          stage.add(layer);

          var textNode = new canva.Text({
            x:50,
            y:50,
            fontSize:15,
          });

          layer.add(textNode);

          textNode.on('dblclick dbltap', ()=> {
            var textPosition=textNode.getAbsolutePosition();
            var stageBox = stage.cotainer().getBoundingClienRect();
            var areaPosition ={
              x:stageBox.left+textPosition.x,
              y:stageBox.top+textPosition.y,
            };

            var textarea=document.createElement('textarea');
            document.body.appendChild(textarea);

            textarea.value=textNode.text();
            textarea.style.position='absolute';
            textarea.style.top=areaPosition.y+ 'px';
            textarea.style.left=areaPosition.x+ 'px';
            textarea.style.width=textNode.width();

            textarea.focus();
            textarea.addEventListener('keydown',function(e){
              if(e.keyCode===13){
                textNode.text(textarea.value);
                document.body.removeChild(textarea);
              }
            });
          });

        </script>
      </section>
    </div>
    
  </body>
</html>




